<!DOCTYPE html>
<html>
<head>
  <title>Show Marker Position in AR</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/jeromeetienne/ar.js/aframe/build/aframe-ar.min.js"></script>
</head>

<body style="margin: 0; overflow: hidden;">
<a-scene
        vr-mode-ui="enabled: false;"
        loading-screen="enabled: false;"
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
        embedded
>
  <a-marker
          id="animated-marker"
          type="pattern"
          preset="custom"
          url="assets/marker.patt"
          emitevents="true"
  >

    <!-- Text to Display Position -->
    <a-text
            id="marker-text"
            value="Position: x=20 y=20 z=20"
            position="0 1 0"
            align="center"
            color="black"
            scale="0.5 0.5 0.5"
    ></a-text>
  </a-marker>

  <a-entity camera></a-entity>
</a-scene>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    let marker = document.getElementById("animated-marker");
    let textElement = document.getElementById("marker-text");

    marker.addEventListener("markerFound", function() {
      let position = marker.object3D.position;
      while (true) {
        textElement.setAttribute("value", `Position: x=${position.x.toFixed(2)} y=${position.y.toFixed(2)} z=${position.z.toFixed(2)}`);
      }
    });

    marker.addEventListener("markerLost", function() {
      console.log("not found");
      textElement.setAttribute("value", "Marker Lost");
    });
  });
</script>
</body>
</html>
